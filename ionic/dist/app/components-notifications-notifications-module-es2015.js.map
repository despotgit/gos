{"version":3,"sources":["./src/app/components/notifications/notifications.component.html","./src/app/components/notifications/notifications-routing.module.ts","./src/app/components/notifications/notifications.component.css","./src/app/components/notifications/notifications.component.ts","./src/app/components/notifications/notifications.module.ts"],"names":[],"mappings":"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","file":"components-notifications-notifications-module-es2015.js","sourcesContent":["export default \"<app-toolbar></app-toolbar>\\n\\n<div class=\\\"container\\\" style=\\\"margin-top: 30px\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col s12 m4 l3\\\">\\n      <app-side></app-side>\\n    </div>\\n\\n    <div class=\\\"col s12 m8 l9\\\">\\n      <ul class=\\\"collection col s12 m10\\\" *ngIf=\\\"notifications.length > 0\\\">\\n        <li class=\\\"collection-item avatar\\\" *ngFor=\\\"let data of notifications\\\">\\n          <img class=\\\"circle\\\" src=\\\"http://res.cloudinary.com/dsg8eiomh/image/upload/v{{data.senderId.picVersion}}/{{data.senderId.picId}}\\\"\\n            alt=\\\"\\\">\\n          <span class=\\\"title\\\">{{data.message}}</span>\\n          <a class=\\\"secondary-content\\\">\\n            <i *ngIf=\\\"!data.read\\\" class=\\\"material-icons\\\">brightness_1</i>\\n            <i *ngIf=\\\"data.read\\\" class=\\\"material-icons\\\">panorama_fish_eye</i>\\n          </a>\\n          <p class=\\\"time\\\">{{TimeFromNow(data.created)}}</p>\\n          <div>\\n            <i class=\\\"material-icons\\\" (click)=\\\"MarkNotication(data)\\\" [ngClass]=\\\"data.read ? 'disabled': 'notDisbled'\\\">\\n              check\\n            </i>\\n            <i class=\\\"material-icons\\\" (click)=\\\"DeleteNotification(data)\\\">\\n              delete_forever\\n            </i>\\n          </div>\\n        </li>\\n      </ul>\\n      <div class=\\\"row\\\" *ngIf=\\\"notifications.length <= 0\\\">\\n        <h3 class=\\\"text\\\">You have no notification</h3>\\n      </div>\\n    </div>\\n  </div>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NotificationsComponent } from './notifications.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationsRoutingModule { }\n","export default \".material-icons {\\n  color: #64b5f6 !important;\\n  margin-right: 10px;\\n  cursor: pointer;\\n}\\n\\n.time {\\n  margin-bottom: 10px !important;\\n  font-style: italic;\\n}\\n\\n.text {\\n  text-align: center;\\n  font-size: 18px !important;\\n}\\n\\n.disabled {\\n  color: #c0c0c0 !important;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDhCQUE4QjtFQUM5QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXRlcmlhbC1pY29ucyB7XG4gIGNvbG9yOiAjNjRiNWY2ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGltZSB7XG4gIG1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xufVxuXG4udGV4dCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5kaXNhYmxlZCB7XG4gIGNvbG9yOiAjYzBjMGMwICFpbXBvcnRhbnQ7XG59XG4iXX0= */\"","import { UsersService } from \"./../../services/users.service\";\nimport { TokenService } from \"./../../services/token.service\";\nimport { Component, OnInit } from \"@angular/core\";\nimport io from \"socket.io-client\";\nimport * as moment from \"moment\";\nimport { serverUrl } from \"../../shared/constants\";\n\n@Component({\n    selector: \"app-notifications\",\n    templateUrl: \"./notifications.component.html\",\n    styleUrls: [\"./notifications.component.css\"]\n})\nexport class NotificationsComponent implements OnInit {\n    socket: any;\n\n    user: any;\n    notifications = [];\n\n    constructor(private tokenService: TokenService, private usersService: UsersService) {\n        this.socket = io(serverUrl);\n    }\n\n    ngOnInit() {\n        this.user = this.tokenService.GetPayload();\n        this.GetUser();\n        this.socket.on(\"refreshPage\", () => {\n            this.GetUser();\n        });\n    }\n\n    GetUser() {\n        this.usersService.GetUserById(this.user._id).subscribe(data => {\n            this.notifications = data.result.notifications.reverse();\n        });\n    }\n\n    MarkNotication(data) {\n        this.usersService.MarkNotification(data._id).subscribe(value => {\n            this.socket.emit(\"refresh\", {});\n        });\n    }\n\n    DeleteNotification(value) {\n        this.usersService.MarkNotification(value._id, true).subscribe(data => {\n            console.log(data);\n            this.socket.emit(\"refresh\", {});\n        });\n    }\n\n    TimeFromNow(time) {\n        return moment(time).fromNow();\n    }\n}\n","import { SharedModule } from './../../shared/shared.module';\nimport { NotificationsComponent } from './notifications.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\n\n@NgModule({\n  declarations: [NotificationsComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    NotificationsRoutingModule\n  ]\n})\nexport class NotificationsModule { }\n"],"sourceRoot":"webpack:///"}