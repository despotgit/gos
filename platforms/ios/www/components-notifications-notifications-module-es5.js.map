{"version":3,"sources":["src/app/components/notifications/notifications.component.html","src/app/components/notifications/notifications-routing.module.ts","src/app/components/notifications/notifications.component.css","src/app/components/notifications/notifications.component.ts","src/app/components/notifications/notifications.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<app-toolbar></app-toolbar>\\n\\n<div class=\\\"container\\\" style=\\\"margin-top: 30px\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col s12 m4 l3\\\">\\n      <app-side></app-side>\\n    </div>\\n\\n    <div class=\\\"col s12 m8 l9\\\">\\n      <ul class=\\\"collection col s12 m10\\\" *ngIf=\\\"notifications.length > 0\\\">\\n        <li class=\\\"collection-item avatar\\\" *ngFor=\\\"let data of notifications\\\">\\n          <img class=\\\"circle\\\" src=\\\"http://res.cloudinary.com/dsg8eiomh/image/upload/v{{data.senderId.picVersion}}/{{data.senderId.picId}}\\\"\\n            alt=\\\"\\\">\\n          <span class=\\\"title\\\">{{data.message}}</span>\\n          <a class=\\\"secondary-content\\\">\\n            <i *ngIf=\\\"!data.read\\\" class=\\\"material-icons\\\">brightness_1</i>\\n            <i *ngIf=\\\"data.read\\\" class=\\\"material-icons\\\">panorama_fish_eye</i>\\n          </a>\\n          <p class=\\\"time\\\">{{TimeFromNow(data.created)}}</p>\\n          <div>\\n            <i class=\\\"material-icons\\\" (click)=\\\"MarkNotication(data)\\\" [ngClass]=\\\"data.read ? 'disabled': 'notDisbled'\\\">\\n              check\\n            </i>\\n            <i class=\\\"material-icons\\\" (click)=\\\"DeleteNotification(data)\\\">\\n              delete_forever\\n            </i>\\n          </div>\\n        </li>\\n      </ul>\\n      <div class=\\\"row\\\" *ngIf=\\\"notifications.length <= 0\\\">\\n        <h3 class=\\\"text\\\">You have no notification</h3>\\n      </div>\\n    </div>\\n  </div>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { NotificationsComponent } from './notifications.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationsRoutingModule { }\n","export default \".material-icons {\\n  color: #64b5f6 !important;\\n  margin-right: 10px;\\n  cursor: pointer;\\n}\\n\\n.time {\\n  margin-bottom: 10px !important;\\n  font-style: italic;\\n}\\n\\n.text {\\n  text-align: center;\\n  font-size: 18px !important;\\n}\\n\\n.disabled {\\n  color: #c0c0c0 !important;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDhCQUE4QjtFQUM5QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXRlcmlhbC1pY29ucyB7XG4gIGNvbG9yOiAjNjRiNWY2ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGltZSB7XG4gIG1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xufVxuXG4udGV4dCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxOHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5kaXNhYmxlZCB7XG4gIGNvbG9yOiAjYzBjMGMwICFpbXBvcnRhbnQ7XG59XG4iXX0= */\"","import { UsersService } from './../../services/users.service';\nimport { TokenService } from './../../services/token.service';\nimport { Component, OnInit } from '@angular/core';\nimport io from 'socket.io-client';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.component.html',\n  styleUrls: ['./notifications.component.css']\n})\nexport class NotificationsComponent implements OnInit {\n  socket: any;\n\n  user: any;\n  notifications = [];\n\n  constructor(private tokenService: TokenService, private usersService: UsersService) {\n    this.socket = io('http://localhost:3000');\n  }\n\n  ngOnInit() {\n    this.user = this.tokenService.GetPayload();\n    this.GetUser();\n    this.socket.on('refreshPage', () => {\n      this.GetUser();\n    });\n  }\n\n  GetUser() {\n    this.usersService.GetUserById(this.user._id).subscribe(data => {\n      this.notifications = data.result.notifications.reverse();\n    });\n  }\n\n  MarkNotication(data) {\n    this.usersService.MarkNotification(data._id).subscribe(value => {\n      this.socket.emit('refresh', {});\n    });\n  }\n\n  DeleteNotification(value) {\n    this.usersService.MarkNotification(value._id, true).subscribe(data => {\n      console.log(data);\n      this.socket.emit('refresh', {});\n    });\n  }\n\n  TimeFromNow(time) {\n    return moment(time).fromNow();\n  }\n}\n","import { SharedModule } from './../../shared/shared.module';\nimport { NotificationsComponent } from './notifications.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\n\n@NgModule({\n  declarations: [NotificationsComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    NotificationsRoutingModule\n  ]\n})\nexport class NotificationsModule { }\n"],"sourceRoot":"webpack:///","file":"components-notifications-notifications-module-es5.js"}